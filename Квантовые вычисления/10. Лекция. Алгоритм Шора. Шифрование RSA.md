## Алгоритм Шора
Алгорим Шора позволяет находить простые множители для больших чисел. С помощью алгоритма Шора можно взламывать шифрование

## Шифрование, которое взламывает алгоритм Шора

###### Асинхронное шифрование
У нас есть некоторый пользователь и собеседник. Пользователь может поделиться со своим собеседником открытым (публичным) ключом, которое представляет собой большое число. С помощью этого числа собеседник может зашифровать свое сообщение и отправить его пользователю.

Если злоумышленник перехватит открытый ключ и сообщение, то ему понадобится несколько тысячелетий для дешифровки на классическом компьютере

Поэтому пользователь может считать, что оба простых числа (из которых состоит публичный ключ), необходимые для дешифровки доступны только ему

###### Работа алгоритма ассиметричного шифрования RSA

$$m-\text{ сообщение}$$
$$e-\text{ некоторое целое число (как и }m\text{)}$$
$$m_{encoded}=m^{e}\mod{N} -\text{ зашифрованное сообщение}$$
$$\text{где }N -\text{некоторое большое число}$$

Открытый или публичный ключ: числа $e$ и $N$. Учитывая операцию остаток от деления, $e$ будет меньше чем $N$

После того как пользователь получает зашифрованное сообщение. Он должен расшифровать его с помощью закрытого ключа $d$:
$$m_{decoded}=m_{encoded}^{d}\mod{N}=m$$

Рассмотрим требования ко всем числам:
- $N > m$
- $N = a\cdot b$, где $a$ и $b$ - простые множители

> Для шифрования требуется знание теории чисел (кольца) и арифметики остатков

Найдя  $a$ и $b$ мы сможем найти число $d$

###### Пример
$$N=3\cdot5=15, a=3, b=5$$
- Существует $b-1$ чисел, которые делятся на $a$ и $<N$
Подходящие числа: $\{3, 6, 9, 12\}$
- Существует $a-1$ чисел, которые делятся на $a$ и $<N$
Подходящие числа: $\{5, 10\}$

Все найденные числа не являются взаимнопростыми с N
> Взаимно простые числа - это числа, у которых нет общих делителей

Среди чисел $<N$ не будет чисел, которые делятся и на $a$, и на $b$, так как $N = a\cdot b$

Найдем количество чисел от 1 до N-1, которые являются взаимно простыми с N:
$$
\psi(N)=N-1-(a-1)-(b-1)
$$
$$
\psi -\text{ функция Эйлера}
$$
Перегруппируем и найдем более практичную формулу:
$$
\psi(N)=ab-1-(a-1)-(b-1)=ab-a-b+1=
$$
$$
=(a-1)(b-1)
$$

В нашем случае:
$$
\psi(N)=8
$$

Взаимнопростые числа: $\{1,2,4,7,8,11,13,14\}$

> **Теорема Эйлера. ** Если мы возьмем некоторое число $e$, которое является взаимнопростым с $N$, то будет соблюдаться следующее равенство:
> $$e^{\psi(N)}\mod N=1$$

Если $e=2$ (e от слова encryption), то $2^{8}=256$, $256=1(15)$

Если $e=4$, то $4^{8}=65536$, $256\mod 15=1$

Выберем число $e$, взаимнопростое с $N$ и с $\psi(N)$. Пусть $e=11$

Число $d<N$ и также должно соблюдаться условие: $ed=1(\psi(N))$. Тогда $d=3$

Пусть $m=8$, $m_{encoded}=m^{e}(N)=8^{11}(15)=8589934592(15)=2$

Тогда $m_{decoded}=m_{encoded}^{d}(N)=2^3(15)=8=m$

---
Если злоумышленник знает числа: $a$ и $b$:

$$
\psi(N)=(a-1)(b-1)=8
$$
$$
m=(m^{e}(N))^{d}(N)=m^{ed}(N)=
$$
$$
m=m\cdot1(N)=m\cdot m^{k\cdot\psi(N)}(N)
$$
$$
ed=k\cdot\psi(N)+1
$$
Зная $e$ и $\psi(N)$, используем алгоритм Евклида и находим $d$

---
Если есть $n$, то мы можем найти $a$ и $b$ с помощью алгоритма Шора 